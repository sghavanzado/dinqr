2025-11-13 01:03:05,380 ERROR: Unhandled exception: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".password_hash AS user_password_hash, "user".role_id AS user_role_id, "user".is_active AS user_is_active, "user".name AS user_name, "user".second_name AS user_second_name, "user".last_name AS user_last_name, "user".phone_number AS user_phone_number, "user".created_at AS user_created_at, "user".updated_at AS user_updated_at, "user".last_login AS user_last_login, "user".login_attempts AS user_login_attempts, "user".locked_until AS user_locked_until 
FROM "user" 
WHERE "user".id = %(pk_1)s]
[parameters: {'pk_1': '1'}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-11-13 01:03:05,389 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:05] "[35m[1mGET /users/profile HTTP/1.1[0m" 500 -
2025-11-13 01:03:08,272 INFO: Petición: OPTIONS /auth/login desde 127.0.0.1 - args: {} - json: None
2025-11-13 01:03:08,292 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:08] "OPTIONS /auth/login HTTP/1.1" 200 -
2025-11-13 01:03:08,599 INFO: Petición: POST /auth/login desde 127.0.0.1 - args: {} - json: {'email': 'maikel@ejemplos.com', 'password': 'PasswordSeguro123!'}
2025-11-13 01:03:10,298 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:10] "POST /auth/login HTTP/1.1" 200 -
2025-11-13 01:03:10,718 INFO: Petición: OPTIONS /users/profile desde 127.0.0.1 - args: {} - json: None
2025-11-13 01:03:10,722 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:10] "OPTIONS /users/profile HTTP/1.1" 200 -
2025-11-13 01:03:10,726 INFO: Petición: GET /users/profile desde 127.0.0.1 - args: {} - json: None
2025-11-13 01:03:10,826 INFO: Petición: OPTIONS /qr/funcionarios-com-qr desde 127.0.0.1 - args: {} - json: None
2025-11-13 01:03:10,832 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:10] "OPTIONS /qr/funcionarios-com-qr HTTP/1.1" 200 -
2025-11-13 01:03:10,827 INFO: Petición: OPTIONS /qr/funcionarios/total desde 127.0.0.1 - args: {} - json: None
2025-11-13 01:03:10,828 INFO: Petición: OPTIONS /qr/funcionarios/total desde 127.0.0.1 - args: {} - json: None
2025-11-13 01:03:10,835 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:10] "OPTIONS /qr/funcionarios/total HTTP/1.1" 200 -
2025-11-13 01:03:10,830 INFO: Petición: OPTIONS /qr/funcionarios-com-qr desde 127.0.0.1 - args: {} - json: None
2025-11-13 01:03:10,837 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:10] "OPTIONS /qr/funcionarios/total HTTP/1.1" 200 -
2025-11-13 01:03:10,838 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:10] "OPTIONS /qr/funcionarios-com-qr HTTP/1.1" 200 -
2025-11-13 01:03:10,884 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:10] "GET /users/profile HTTP/1.1" 200 -
2025-11-13 01:03:11,138 INFO: Petición: GET /qr/funcionarios-com-qr desde 127.0.0.1 - args: {} - json: None
2025-11-13 01:03:11,141 INFO: Conexión obtenida del pool. Activas: 11, Inactivas: 189
2025-11-13 01:03:11,142 INFO: Petición: GET /qr/funcionarios/total desde 127.0.0.1 - args: {} - json: None
2025-11-13 01:03:11,288 INFO: Conexión obtenida del pool. Activas: 12, Inactivas: 188
2025-11-13 01:03:11,566 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:11] "GET /qr/funcionarios/total HTTP/1.1" 200 -
2025-11-13 01:03:11,574 INFO: Petición: OPTIONS /qr/funcionarios/total-con-qr desde 127.0.0.1 - args: {} - json: None
2025-11-13 01:03:11,576 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:11] "OPTIONS /qr/funcionarios/total-con-qr HTTP/1.1" 200 -
2025-11-13 01:03:11,873 INFO: Petición: GET /qr/funcionarios/total desde 127.0.0.1 - args: {} - json: None
2025-11-13 01:03:11,880 INFO: Petición: GET /qr/funcionarios/total-con-qr desde 127.0.0.1 - args: {} - json: None
2025-11-13 01:03:12,912 INFO: Conexión obtenida del pool. Activas: 13, Inactivas: 187
2025-11-13 01:03:12,922 INFO: Conexión obtenida del pool. Activas: 14, Inactivas: 186
2025-11-13 01:03:13,034 INFO: Conexión liberada al pool. Activas: 13, Inactivas: 187
2025-11-13 01:03:13,035 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:13] "GET /qr/funcionarios/total-con-qr HTTP/1.1" 200 -
2025-11-13 01:03:13,036 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:13] "GET /qr/funcionarios/total HTTP/1.1" 200 -
2025-11-13 01:03:13,347 INFO: Petición: GET /qr/funcionarios/total-con-qr desde 127.0.0.1 - args: {} - json: None
2025-11-13 01:03:13,349 INFO: Conexión obtenida del pool. Activas: 14, Inactivas: 186
2025-11-13 01:03:13,353 INFO: Conexión liberada al pool. Activas: 13, Inactivas: 187
2025-11-13 01:03:13,354 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:13] "GET /qr/funcionarios/total-con-qr HTTP/1.1" 200 -
2025-11-13 01:03:23,436 INFO: Petición: GET /qr/funcionarios-com-qr desde 127.0.0.1 - args: {} - json: None
2025-11-13 01:03:23,439 INFO: Conexión obtenida del pool. Activas: 14, Inactivas: 186
2025-11-13 01:03:23,444 INFO: IDs de funcionarios con QR obtenidos: ['102', '118', '122', '119', '125']
2025-11-13 01:03:23,445 INFO: Conexión liberada al pool. Activas: 13, Inactivas: 187
2025-11-13 01:03:23,446 INFO: Ejecutando consulta SQL para funcionarios COM QR: 
                    SELECT sap, nome, funcao, area, nif, telefone, email, unineg
                    FROM sonacard
                    WHERE sap IN (?,?,?,?,?)
                    ORDER BY sap
                
2025-11-13 01:03:23,448 INFO: Funcionarios con QR obtenidos: 5 registros
2025-11-13 01:03:23,451 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:23] "GET /qr/funcionarios-com-qr HTTP/1.1" 200 -
2025-11-13 01:03:28,170 INFO: Petición: OPTIONS /qr/funcionarios-sin-qr desde 127.0.0.1 - args: {} - json: None
2025-11-13 01:03:28,177 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:28] "OPTIONS /qr/funcionarios-sin-qr HTTP/1.1" 200 -
2025-11-13 01:03:28,172 INFO: Petición: OPTIONS /qr/funcionarios desde 127.0.0.1 - args: {'page': '1', 'per_page': '10', 'filtro': ''} - json: None
2025-11-13 01:03:28,173 INFO: Petición: OPTIONS /qr/funcionarios-sin-qr desde 127.0.0.1 - args: {} - json: None
2025-11-13 01:03:28,180 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:28] "OPTIONS /qr/funcionarios?page=1&per_page=10&filtro= HTTP/1.1" 200 -
2025-11-13 01:03:28,176 INFO: Petición: OPTIONS /qr/funcionarios desde 127.0.0.1 - args: {'page': '1', 'per_page': '10', 'filtro': ''} - json: None
2025-11-13 01:03:28,183 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:28] "OPTIONS /qr/funcionarios-sin-qr HTTP/1.1" 200 -
2025-11-13 01:03:28,186 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:28] "OPTIONS /qr/funcionarios?page=1&per_page=10&filtro= HTTP/1.1" 200 -
2025-11-13 01:03:28,182 INFO: Petición: GET /qr/funcionarios-sin-qr desde 127.0.0.1 - args: {} - json: None
2025-11-13 01:03:28,189 INFO: Conexión obtenida del pool. Activas: 14, Inactivas: 186
2025-11-13 01:03:28,319 INFO: Conexión liberada al pool. Activas: 13, Inactivas: 187
2025-11-13 01:03:28,320 INFO: Ejecutando consulta SQL: 
                    SELECT sap, nome, funcao, area, nif, telefone, email, unineg
                    FROM sonacard
                    WHERE sap NOT IN (?,?,?,?,?)
                
2025-11-13 01:03:28,371 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:28] "GET /qr/funcionarios-sin-qr HTTP/1.1" 200 -
2025-11-13 01:03:28,491 INFO: Petición: GET /qr/funcionarios desde 127.0.0.1 - args: {'page': '1', 'per_page': '10', 'filtro': ''} - json: None
2025-11-13 01:03:28,496 INFO: Conexión obtenida del pool. Activas: 14, Inactivas: 186
2025-11-13 01:03:28,501 INFO: IDs de funcionarios con QR obtenidos: ['102', '118', '122', '119', '125']
2025-11-13 01:03:28,501 INFO: Conexión liberada al pool. Activas: 13, Inactivas: 187
2025-11-13 01:03:28,502 INFO: Ejecutando consulta SQL: 
                    SELECT sap, nome, funcao, area, nif, telefone, email, unineg
                    FROM sonacard
                    WHERE sap IN (?,?,?,?,?)
                    AND nome LIKE ?
                    ORDER BY sap
                    OFFSET ? ROWS FETCH NEXT ? ROWS ONLY
                
2025-11-13 01:03:28,509 INFO: Funcionarios obtenidos: 5 registros
2025-11-13 01:03:28,513 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:28] "GET /qr/funcionarios?page=1&per_page=10&filtro= HTTP/1.1" 200 -
2025-11-13 01:03:28,681 INFO: Petición: GET /qr/funcionarios-sin-qr desde 127.0.0.1 - args: {} - json: None
2025-11-13 01:03:28,681 INFO: Conexión obtenida del pool. Activas: 14, Inactivas: 186
2025-11-13 01:03:28,681 INFO: Conexión liberada al pool. Activas: 13, Inactivas: 187
2025-11-13 01:03:28,681 INFO: Ejecutando consulta SQL: 
                    SELECT sap, nome, funcao, area, nif, telefone, email, unineg
                    FROM sonacard
                    WHERE sap NOT IN (?,?,?,?,?)
                
2025-11-13 01:03:28,743 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:28] "GET /qr/funcionarios-sin-qr HTTP/1.1" 200 -
2025-11-13 01:03:28,831 INFO: Petición: GET /qr/funcionarios desde 127.0.0.1 - args: {'page': '1', 'per_page': '10', 'filtro': ''} - json: None
2025-11-13 01:03:28,836 INFO: Conexión obtenida del pool. Activas: 14, Inactivas: 186
2025-11-13 01:03:28,843 INFO: IDs de funcionarios con QR obtenidos: ['102', '118', '122', '119', '125']
2025-11-13 01:03:28,844 INFO: Conexión liberada al pool. Activas: 13, Inactivas: 187
2025-11-13 01:03:28,845 INFO: Ejecutando consulta SQL: 
                    SELECT sap, nome, funcao, area, nif, telefone, email, unineg
                    FROM sonacard
                    WHERE sap IN (?,?,?,?,?)
                    AND nome LIKE ?
                    ORDER BY sap
                    OFFSET ? ROWS FETCH NEXT ? ROWS ONLY
                
2025-11-13 01:03:28,846 INFO: Funcionarios obtenidos: 5 registros
2025-11-13 01:03:28,848 INFO: 127.0.0.1 - - [13/Nov/2025 01:03:28] "GET /qr/funcionarios?page=1&per_page=10&filtro= HTTP/1.1" 200 -
2025-11-13 01:03:30,053 ERROR: Error al consultar IDs de funcionarios con QR en la base de datos local: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

2025-11-13 01:03:30,054 INFO: Conexión liberada al pool. Activas: 12, Inactivas: 188
