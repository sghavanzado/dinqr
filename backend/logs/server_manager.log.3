2025-11-12 16:21:49,362 INFO: Orígenes CORS permitidos: ['https://localhost', 'https://localhost:443', 'https://127.0.0.1', 'https://localhost:9000', 'https://127.0.1:9000', 'https://localhost:5137', 'https://localhost:5173']
2025-11-12 16:21:49,362 INFO: ==================================================
2025-11-12 16:21:49,362 INFO: DINQR Backend Application Starting
2025-11-12 16:21:49,362 INFO: ==================================================
2025-11-12 16:21:49,362 INFO: Environment: production
2025-11-12 16:21:49,362 INFO: Debug mode: False
2025-11-12 16:21:49,362 INFO: Database URI: 192.168.253.133:5432/localdb
2025-11-12 16:21:49,440 INFO: Permissions and roles initialized successfully.
2025-11-12 16:21:49,440 INFO: Permissions initialized successfully
2025-11-12 16:21:49,456 WARNING: ============================================================
2025-11-12 16:21:49,456 WARNING: WARNING: Running development server
2025-11-12 16:21:49,456 WARNING: For production use:
2025-11-12 16:21:49,456 WARNING:   python waitress_server.py
2025-11-12 16:21:49,456 WARNING:   python windows_service.py install
2025-11-12 16:21:49,456 WARNING: ============================================================
2025-11-12 16:21:49,471 INFO: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-11-12 16:21:49,471 INFO: [33mPress CTRL+C to quit[0m
2025-11-12 16:21:56,595 INFO: Petición: OPTIONS /qr/funcionarios-sin-qr desde 127.0.0.1 - args: {} - json: None
2025-11-12 16:21:56,602 INFO: 127.0.0.1 - - [12/Nov/2025 16:21:56] "OPTIONS /qr/funcionarios-sin-qr HTTP/1.1" 200 -
2025-11-12 16:21:56,597 INFO: Petición: OPTIONS /qr/funcionarios desde 127.0.0.1 - args: {'page': '1', 'per_page': '10', 'filtro': ''} - json: None
2025-11-12 16:21:56,598 INFO: Petición: OPTIONS /qr/funcionarios-sin-qr desde 127.0.0.1 - args: {} - json: None
2025-11-12 16:21:56,600 INFO: Petición: OPTIONS /qr/funcionarios desde 127.0.0.1 - args: {'page': '1', 'per_page': '10', 'filtro': ''} - json: None
2025-11-12 16:21:56,604 INFO: 127.0.0.1 - - [12/Nov/2025 16:21:56] "OPTIONS /qr/funcionarios?page=1&per_page=10&filtro= HTTP/1.1" 200 -
2025-11-12 16:21:56,605 INFO: 127.0.0.1 - - [12/Nov/2025 16:21:56] "OPTIONS /qr/funcionarios-sin-qr HTTP/1.1" 200 -
2025-11-12 16:21:56,606 INFO: 127.0.0.1 - - [12/Nov/2025 16:21:56] "OPTIONS /qr/funcionarios?page=1&per_page=10&filtro= HTTP/1.1" 200 -
2025-11-12 16:21:56,908 INFO: Petición: GET /qr/funcionarios-sin-qr desde 127.0.0.1 - args: {} - json: None
2025-11-12 16:21:56,910 INFO: Conexión obtenida del pool. Activas: 1, Inactivas: 199
2025-11-12 16:21:56,912 INFO: Petición: GET /qr/funcionarios desde 127.0.0.1 - args: {'page': '1', 'per_page': '10', 'filtro': ''} - json: None
2025-11-12 16:21:56,916 INFO: Conexión liberada al pool. Activas: 0, Inactivas: 200
2025-11-12 16:21:56,924 INFO: Ejecutando consulta SQL: 
                    SELECT sap, nome, funcao, area, nif, telefone, email, unineg
                    FROM sonacard
                    WHERE sap NOT IN (?)
                
2025-11-12 16:21:56,950 INFO: Conexión obtenida del pool. Activas: 1, Inactivas: 199
2025-11-12 16:21:56,974 INFO: 127.0.0.1 - - [12/Nov/2025 16:21:56] "GET /qr/funcionarios-sin-qr HTTP/1.1" 200 -
2025-11-12 16:21:56,975 INFO: IDs de funcionarios con QR obtenidos: ['102']
2025-11-12 16:21:56,976 INFO: Conexión liberada al pool. Activas: 0, Inactivas: 200
2025-11-12 16:21:56,977 INFO: Ejecutando consulta SQL: 
                    SELECT sap, nome, funcao, area, nif, telefone, email, unineg
                    FROM sonacard
                    WHERE sap IN (?)
                    AND nome LIKE ?
                    ORDER BY sap
                    OFFSET ? ROWS FETCH NEXT ? ROWS ONLY
                
2025-11-12 16:21:56,982 INFO: Funcionarios obtenidos: 1 registros
2025-11-12 16:21:56,983 INFO: 127.0.0.1 - - [12/Nov/2025 16:21:56] "GET /qr/funcionarios?page=1&per_page=10&filtro= HTTP/1.1" 200 -
2025-11-12 16:21:57,159 INFO: Petición: GET /qr/funcionarios-sin-qr desde 127.0.0.1 - args: {} - json: None
2025-11-12 16:21:57,162 INFO: Conexión obtenida del pool. Activas: 1, Inactivas: 199
2025-11-12 16:21:57,164 INFO: Conexión liberada al pool. Activas: 0, Inactivas: 200
2025-11-12 16:21:57,173 INFO: Ejecutando consulta SQL: 
                    SELECT sap, nome, funcao, area, nif, telefone, email, unineg
                    FROM sonacard
                    WHERE sap NOT IN (?)
                
2025-11-12 16:21:57,223 INFO: 127.0.0.1 - - [12/Nov/2025 16:21:57] "GET /qr/funcionarios-sin-qr HTTP/1.1" 200 -
2025-11-12 16:21:57,279 INFO: Petición: GET /qr/funcionarios desde 127.0.0.1 - args: {'page': '1', 'per_page': '10', 'filtro': ''} - json: None
2025-11-12 16:21:57,282 INFO: Conexión obtenida del pool. Activas: 1, Inactivas: 199
2025-11-12 16:21:57,284 INFO: IDs de funcionarios con QR obtenidos: ['102']
2025-11-12 16:21:57,285 INFO: Conexión liberada al pool. Activas: 0, Inactivas: 200
2025-11-12 16:21:57,285 INFO: Ejecutando consulta SQL: 
                    SELECT sap, nome, funcao, area, nif, telefone, email, unineg
                    FROM sonacard
                    WHERE sap IN (?)
                    AND nome LIKE ?
                    ORDER BY sap
                    OFFSET ? ROWS FETCH NEXT ? ROWS ONLY
                
2025-11-12 16:21:57,286 INFO: Funcionarios obtenidos: 1 registros
2025-11-12 16:21:57,288 INFO: 127.0.0.1 - - [12/Nov/2025 16:21:57] "GET /qr/funcionarios?page=1&per_page=10&filtro= HTTP/1.1" 200 -
2025-11-12 16:22:03,862 INFO: Petición: OPTIONS /qr/generar desde 127.0.0.1 - args: {} - json: None
2025-11-12 16:22:03,891 INFO: 127.0.0.1 - - [12/Nov/2025 16:22:03] "OPTIONS /qr/generar HTTP/1.1" 200 -
2025-11-12 16:22:03,896 INFO: Petición: POST /qr/generar desde 127.0.0.1 - args: {} - json: {'ids': ['118']}
2025-11-12 16:22:03,897 INFO: Conexión obtenida del pool. Activas: 1, Inactivas: 199
2025-11-12 16:22:03,929 INFO: Conexión obtenida del pool. Activas: 2, Inactivas: 198
2025-11-12 16:22:03,957 INFO: Conexión obtenida del pool. Activas: 3, Inactivas: 197
2025-11-12 16:22:03,992 INFO: Conexión obtenida del pool. Activas: 4, Inactivas: 196
2025-11-12 16:22:04,039 INFO: Conexión obtenida del pool. Activas: 5, Inactivas: 195
2025-11-12 16:22:04,104 INFO: 127.0.0.1 - - [12/Nov/2025 16:22:04] "POST /qr/generar HTTP/1.1" 200 -
2025-11-12 16:22:06,198 INFO: Petición: OPTIONS /qr/funcionarios-sin-qr desde 127.0.0.1 - args: {} - json: None
2025-11-12 16:22:06,201 INFO: 127.0.0.1 - - [12/Nov/2025 16:22:06] "OPTIONS /qr/funcionarios-sin-qr HTTP/1.1" 200 -
2025-11-12 16:22:06,505 INFO: Petición: GET /qr/funcionarios-sin-qr desde 127.0.0.1 - args: {} - json: None
2025-11-12 16:22:06,541 INFO: Conexión obtenida del pool. Activas: 6, Inactivas: 194
2025-11-12 16:22:06,544 INFO: Conexión liberada al pool. Activas: 5, Inactivas: 195
2025-11-12 16:22:06,545 INFO: Ejecutando consulta SQL: 
                    SELECT sap, nome, funcao, area, nif, telefone, email, unineg
                    FROM sonacard
                    WHERE sap NOT IN (?,?)
                
2025-11-12 16:22:06,592 INFO: 127.0.0.1 - - [12/Nov/2025 16:22:06] "GET /qr/funcionarios-sin-qr HTTP/1.1" 200 -
2025-11-12 17:04:16,459 INFO: Petición: OPTIONS /users/profile desde 127.0.0.1 - args: {} - json: None
2025-11-12 17:04:16,460 INFO: Petición: OPTIONS /users/profile desde 127.0.0.1 - args: {} - json: None
2025-11-12 17:04:16,467 INFO: 127.0.0.1 - - [12/Nov/2025 17:04:16] "OPTIONS /users/profile HTTP/1.1" 200 -
2025-11-12 17:04:16,468 INFO: 127.0.0.1 - - [12/Nov/2025 17:04:16] "OPTIONS /users/profile HTTP/1.1" 200 -
2025-11-12 17:04:16,774 INFO: Petición: GET /users/profile desde 127.0.0.1 - args: {} - json: None
2025-11-12 17:04:16,779 INFO: 127.0.0.1 - - [12/Nov/2025 17:04:16] "[31m[1mGET /users/profile HTTP/1.1[0m" 401 -
2025-11-12 17:22:42,117 INFO: Petición: OPTIONS /auth/login desde 127.0.0.1 - args: {} - json: None
2025-11-12 17:22:42,122 INFO: 127.0.0.1 - - [12/Nov/2025 17:22:42] "OPTIONS /auth/login HTTP/1.1" 200 -
2025-11-12 17:22:42,427 INFO: Petición: POST /auth/login desde 127.0.0.1 - args: {} - json: {'email': 'maikel@ejemplos.com', 'password': 'PasswordSeguro123!'}
2025-11-12 17:22:42,620 INFO: 127.0.0.1 - - [12/Nov/2025 17:22:42] "POST /auth/login HTTP/1.1" 200 -
2025-11-12 17:22:42,823 INFO: Petición: OPTIONS /users/profile desde 127.0.0.1 - args: {} - json: None
2025-11-12 17:22:42,826 INFO: 127.0.0.1 - - [12/Nov/2025 17:22:42] "OPTIONS /users/profile HTTP/1.1" 200 -
2025-11-12 17:22:42,829 INFO: Petición: GET /users/profile desde 127.0.0.1 - args: {} - json: None
2025-11-12 17:22:42,844 INFO: 127.0.0.1 - - [12/Nov/2025 17:22:42] "GET /users/profile HTTP/1.1" 200 -
2025-11-12 17:22:43,367 INFO: Petición: OPTIONS /qr/funcionarios/total desde 127.0.0.1 - args: {} - json: None
2025-11-12 17:22:43,373 INFO: 127.0.0.1 - - [12/Nov/2025 17:22:43] "OPTIONS /qr/funcionarios/total HTTP/1.1" 200 -
2025-11-12 17:22:43,368 INFO: Petición: OPTIONS /qr/funcionarios-com-qr desde 127.0.0.1 - args: {} - json: None
2025-11-12 17:22:43,369 INFO: Petición: OPTIONS /qr/funcionarios/total desde 127.0.0.1 - args: {} - json: None
2025-11-12 17:22:43,375 INFO: 127.0.0.1 - - [12/Nov/2025 17:22:43] "OPTIONS /qr/funcionarios-com-qr HTTP/1.1" 200 -
2025-11-12 17:22:43,370 INFO: Petición: OPTIONS /qr/funcionarios-com-qr desde 127.0.0.1 - args: {} - json: None
2025-11-12 17:22:43,377 INFO: 127.0.0.1 - - [12/Nov/2025 17:22:43] "OPTIONS /qr/funcionarios/total HTTP/1.1" 200 -
2025-11-12 17:22:43,379 INFO: 127.0.0.1 - - [12/Nov/2025 17:22:43] "OPTIONS /qr/funcionarios-com-qr HTTP/1.1" 200 -
2025-11-12 17:22:43,678 INFO: Petición: GET /qr/funcionarios/total desde 127.0.0.1 - args: {} - json: None
2025-11-12 17:22:43,682 INFO: Conexión obtenida del pool. Activas: 6, Inactivas: 194
2025-11-12 17:22:43,682 INFO: Petición: GET /qr/funcionarios-com-qr desde 127.0.0.1 - args: {} - json: None
2025-11-12 17:22:43,709 INFO: Conexión obtenida del pool. Activas: 7, Inactivas: 193
