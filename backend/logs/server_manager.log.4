2025-09-16 16:18:55,854 ERROR: Erro ao listar cargos: (pyodbc.ProgrammingError) ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Invalid column name 'DepartamentoID'. (207) (SQLExecDirectW)")
[SQL: SELECT [Cargos].[CargoID] AS [Cargos_CargoID], [Cargos].[Nome] AS [Cargos_Nome], [Cargos].[Descricao] AS [Cargos_Descricao], [Cargos].[Nivel] AS [Cargos_Nivel], [Cargos].[DepartamentoID] AS [Cargos_DepartamentoID] 
FROM [Cargos] ORDER BY [Cargos].[CargoID]]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-09-16 16:18:55,973 INFO: 127.0.0.1 - - [16/Sep/2025 16:18:55] "[35m[1mGET /api/iamc/cargos HTTP/1.1[0m" 500 -
2025-09-16 16:30:15,918 INFO: Orígenes CORS permitidos: ['https://localhost', 'https://localhost:443', 'https://127.0.0.1', 'https://localhost:9000', 'https://127.0.1:9000']
2025-09-16 16:30:15,920 INFO: ==================================================
2025-09-16 16:30:15,921 INFO: DINQR Backend Application Starting
2025-09-16 16:30:15,922 INFO: ==================================================
2025-09-16 16:30:15,923 INFO: Environment: production
2025-09-16 16:30:15,924 INFO: Debug mode: False
2025-09-16 16:30:15,925 INFO: Database URI: localhost/IAMC (SQL Server)
2025-09-16 16:30:15,944 INFO: IAMC SQL Server connection initialized successfully
2025-09-16 16:30:15,996 INFO: Permissions and roles initialized successfully.
2025-09-16 16:30:15,999 INFO: Permissions initialized successfully
2025-09-16 16:30:16,108 INFO: Orígenes CORS permitidos: ['https://localhost', 'https://localhost:443', 'https://127.0.0.1', 'https://localhost:9000', 'https://127.0.1:9000']
2025-09-16 16:30:16,111 INFO: ==================================================
2025-09-16 16:30:16,113 INFO: DINQR Backend Application Starting
2025-09-16 16:30:16,116 INFO: ==================================================
2025-09-16 16:30:16,118 INFO: Environment: production
2025-09-16 16:30:16,120 INFO: Debug mode: False
2025-09-16 16:30:16,122 INFO: Database URI: localhost/IAMC (SQL Server)
2025-09-16 16:30:16,125 INFO: IAMC SQL Server connection initialized successfully
2025-09-16 16:30:16,163 INFO: Permissions and roles initialized successfully.
2025-09-16 16:30:16,167 INFO: Permissions initialized successfully
2025-09-16 16:30:16,200 WARNING: ============================================================
2025-09-16 16:30:16,203 WARNING: WARNING: Running development server
2025-09-16 16:30:16,206 WARNING: For production use:
2025-09-16 16:30:16,207 WARNING:   python waitress_server.py
2025-09-16 16:30:16,209 WARNING:   python windows_service.py install
2025-09-16 16:30:16,213 WARNING: ============================================================
2025-09-16 16:30:16,228 INFO: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-09-16 16:30:16,231 INFO: [33mPress CTRL+C to quit[0m
2025-09-16 16:30:29,483 INFO: Petición: OPTIONS /auth/login desde 127.0.0.1 - args: {} - json: None
2025-09-16 16:30:29,488 INFO: 127.0.0.1 - - [16/Sep/2025 16:30:29] "OPTIONS /auth/login HTTP/1.1" 200 -
2025-09-16 16:30:29,793 INFO: Petición: POST /auth/login desde 127.0.0.1 - args: {} - json: {'email': 'maikel@ejemplos.com', 'password': 'PasswordSeguro123!'}
2025-09-16 16:30:29,966 INFO: 127.0.0.1 - - [16/Sep/2025 16:30:29] "POST /auth/login HTTP/1.1" 200 -
2025-09-16 16:30:30,632 INFO: Petición: OPTIONS /users/profile desde 127.0.0.1 - args: {} - json: None
2025-09-16 16:30:30,652 INFO: 127.0.0.1 - - [16/Sep/2025 16:30:30] "OPTIONS /users/profile HTTP/1.1" 200 -
2025-09-16 16:30:30,660 INFO: Petición: GET /users/profile desde 127.0.0.1 - args: {} - json: None
2025-09-16 16:30:30,668 INFO: 127.0.0.1 - - [16/Sep/2025 16:30:30] "GET /users/profile HTTP/1.1" 200 -
2025-09-16 16:30:30,765 INFO: Petición: OPTIONS /qr/funcionarios/total desde 127.0.0.1 - args: {} - json: None
2025-09-16 16:30:30,770 INFO: 127.0.0.1 - - [16/Sep/2025 16:30:30] "OPTIONS /qr/funcionarios/total HTTP/1.1" 200 -
2025-09-16 16:30:30,834 INFO: Petición: OPTIONS /qr/funcionarios-com-qr desde 127.0.0.1 - args: {} - json: None
2025-09-16 16:30:30,841 INFO: 127.0.0.1 - - [16/Sep/2025 16:30:30] "OPTIONS /qr/funcionarios-com-qr HTTP/1.1" 200 -
2025-09-16 16:30:30,838 INFO: Petición: OPTIONS /qr/funcionarios/total desde 127.0.0.1 - args: {} - json: None
2025-09-16 16:30:30,843 INFO: 127.0.0.1 - - [16/Sep/2025 16:30:30] "OPTIONS /qr/funcionarios/total HTTP/1.1" 200 -
2025-09-16 16:30:30,839 INFO: Petición: OPTIONS /qr/funcionarios-com-qr desde 127.0.0.1 - args: {} - json: None
2025-09-16 16:30:30,850 INFO: 127.0.0.1 - - [16/Sep/2025 16:30:30] "OPTIONS /qr/funcionarios-com-qr HTTP/1.1" 200 -
2025-09-16 16:30:31,086 INFO: Petición: GET /qr/funcionarios/total desde 127.0.0.1 - args: {} - json: None
2025-09-16 16:30:31,094 ERROR: Error al obtener el total de funcionarios: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Incorrect syntax near the keyword 'key'. (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-09-16 16:30:31,097 INFO: 127.0.0.1 - - [16/Sep/2025 16:30:31] "[35m[1mGET /qr/funcionarios/total HTTP/1.1[0m" 500 -
2025-09-16 16:30:31,322 INFO: Petición: GET /qr/funcionarios-com-qr desde 127.0.0.1 - args: {} - json: None
2025-09-16 16:30:31,326 INFO: IDs de funcionarios con QR obtenidos: ['102', '106', '107', '109', '11', '111', '113', '114', '118', '119', '120', '122', '125', '128', '13', '130', '131', '132', '133', '134', '135', '136', '137', '138', '139', '140', '14002', '14005', '14007', '14008', '14009', '14014', '14015', '14020', '142', '148', '15', '227', '43', '5000011', '5000012', '5000013', '5000018', '5000030', '500005', '5000054', '5000055', '74']
2025-09-16 16:30:31,336 INFO: Petición: GET /qr/funcionarios/total desde 127.0.0.1 - args: {} - json: None
2025-09-16 16:30:31,339 INFO: Ejecutando consulta SQL para funcionarios COM QR: 
                    SELECT sap, nome, funcao, area, nif, telefone, email, unineg
                    FROM sonacard
                    WHERE sap IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
                    ORDER BY sap
                
2025-09-16 16:30:31,341 INFO: Funcionarios con QR obtenidos: 48 registros
2025-09-16 16:30:31,346 INFO: 127.0.0.1 - - [16/Sep/2025 16:30:31] "GET /qr/funcionarios-com-qr HTTP/1.1" 200 -
2025-09-16 16:30:31,347 ERROR: Error al obtener el total de funcionarios: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Incorrect syntax near the keyword 'key'. (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Statement(s) could not be prepared. (8180)")
2025-09-16 16:30:31,348 INFO: 127.0.0.1 - - [16/Sep/2025 16:30:31] "[35m[1mGET /qr/funcionarios/total HTTP/1.1[0m" 500 -
2025-09-16 16:30:31,773 INFO: Petición: GET /qr/funcionarios-com-qr desde 127.0.0.1 - args: {} - json: None
2025-09-16 16:30:31,777 INFO: IDs de funcionarios con QR obtenidos: ['102', '106', '107', '109', '11', '111', '113', '114', '118', '119', '120', '122', '125', '128', '13', '130', '131', '132', '133', '134', '135', '136', '137', '138', '139', '140', '14002', '14005', '14007', '14008', '14009', '14014', '14015', '14020', '142', '148', '15', '227', '43', '5000011', '5000012', '5000013', '5000018', '5000030', '500005', '5000054', '5000055', '74']
2025-09-16 16:30:31,778 INFO: Ejecutando consulta SQL para funcionarios COM QR: 
                    SELECT sap, nome, funcao, area, nif, telefone, email, unineg
                    FROM sonacard
                    WHERE sap IN (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
                    ORDER BY sap
                
2025-09-16 16:30:31,780 INFO: Funcionarios con QR obtenidos: 48 registros
2025-09-16 16:30:32,011 INFO: 127.0.0.1 - - [16/Sep/2025 16:30:32] "GET /qr/funcionarios-com-qr HTTP/1.1" 200 -
2025-09-16 16:30:35,766 INFO: Petición: GET /api/iamc/departamentos desde 127.0.0.1 - args: {} - json: None
2025-09-16 16:30:35,767 INFO: Petición: GET /api/iamc/cargos desde 127.0.0.1 - args: {} - json: None
2025-09-16 16:30:35,794 INFO: 127.0.0.1 - - [16/Sep/2025 16:30:35] "GET /api/iamc/departamentos HTTP/1.1" 200 -
2025-09-16 16:30:35,796 INFO: 127.0.0.1 - - [16/Sep/2025 16:30:35] "GET /api/iamc/cargos HTTP/1.1" 200 -
2025-09-16 16:30:36,035 INFO: Petición: GET /api/iamc/departamentos desde 127.0.0.1 - args: {} - json: None
2025-09-16 16:30:36,043 INFO: 127.0.0.1 - - [16/Sep/2025 16:30:36] "GET /api/iamc/departamentos HTTP/1.1" 200 -
2025-09-16 16:30:36,105 INFO: Petición: GET /api/iamc/cargos desde 127.0.0.1 - args: {} - json: None
2025-09-16 16:30:36,111 INFO: 127.0.0.1 - - [16/Sep/2025 16:30:36] "GET /api/iamc/cargos HTTP/1.1" 200 -
2025-09-16 16:30:50,114 INFO: Petición: OPTIONS /api/iamc/cargos desde 127.0.0.1 - args: {} - json: None
2025-09-16 16:30:50,126 INFO: 127.0.0.1 - - [16/Sep/2025 16:30:50] "OPTIONS /api/iamc/cargos HTTP/1.1" 200 -
2025-09-16 16:30:50,434 INFO: Petición: POST /api/iamc/cargos desde 127.0.0.1 - args: {} - json: {'Nome': 'Director RRHH', 'Descricao': 'sdsdsds', 'Nivel': '', 'DepartamentoID': 10}
2025-09-16 16:30:50,450 INFO: 127.0.0.1 - - [16/Sep/2025 16:30:50] "[35m[1mPOST /api/iamc/cargos HTTP/1.1[0m" 201 -
2025-09-16 16:30:50,821 INFO: Petición: GET /api/iamc/cargos desde 127.0.0.1 - args: {} - json: None
2025-09-16 16:30:50,822 INFO: Petición: GET /api/iamc/departamentos desde 127.0.0.1 - args: {} - json: None
2025-09-16 16:30:50,830 INFO: 127.0.0.1 - - [16/Sep/2025 16:30:50] "GET /api/iamc/cargos HTTP/1.1" 200 -
2025-09-16 16:30:50,836 INFO: 127.0.0.1 - - [16/Sep/2025 16:30:50] "GET /api/iamc/departamentos HTTP/1.1" 200 -
2025-09-16 16:31:12,053 INFO: Petición: GET /api/iamc/departamentos desde 127.0.0.1 - args: {} - json: None
2025-09-16 16:31:12,092 INFO: 127.0.0.1 - - [16/Sep/2025 16:31:12] "GET /api/iamc/departamentos HTTP/1.1" 200 -
